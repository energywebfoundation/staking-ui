<app-loading class="d-block"></app-loading>

<div class="staking-container">
  <app-staking-header></app-staking-header>
  <div class="content-wrapper">
    <div class="row">
      <div class="col-md-12 mb-md-0 mb-lg-0">
        <div class="staking-card widget-main row">
          <div class="col-xl-6 d-flex align-items-center">
            <div class="d-flex flex-column">
              <div>
                <h5 class="mb-0 small letter-spacing text-uppercase">Staking</h5>
                <h2>Stake your <br><span>Energy Web Token</span></h2>
              </div>
              <div class="my-3">
                <p>
                  This staking pool is operated by Energy Web on behalf of the
                  Energy Web Community Fund. The Community Fund is dedicated
                  entirely to enhancing the open-source EW-DOS technology stack and
                  expanding its real-world use.
                </p>
                <p>
                  Energy Web Token Staking is the first step in deploying the
                  decentralized Service Level Assurance (dSLA) platform. dSLA is the
                  decentralized quality assurance and delivery mechanism for Utility
                  Layer services on the Energy Web tech stack. Staking is a crucial
                  component of dSLA, providing a decentralized curation and trust
                  mechanism on the platform.
                </p>
                <p>
                  EWT staking is probably the first blockchain staking mechanism
                  that allows users to authenticate in a fully decentralized way,
                  using our Decentralized Identifiers (DID) technology.
                </p>
                <a data-qa-id="learn-dsla"
                   class="stake-btn text-uppercase d-flex justify-content-center align-items-center"
                   href="https://www.energyweb.org/wp-content/uploads/2021/12/dSLA-Lightpaper.pdf" target="_blank">
                  Learn More
                </a>
              </div>
            </div>
          </div>
          <div class="col-xl-6 d-flex align-items-center justify-content-center">
            <img class="position-relative atoms-wrapper" style="z-index: 14;" src="assets/img/bg-atoms.png"/>
            <div class="d-flex align-items-center position-absolute" style="height: 400px; z-index: 10;">
              <div class="circle-progress-circle position-absolute" style="z-index: 12;">
                <div class="circular-title">STAKING POOL</div>
                <div class="circular-percentage">{{getTotalStakedPercent$ | async | lastDigits}}%</div>
                <div class="circular-desc">Consortia Relay Chain <br> SNAPSHOTS</div>
                <div class="mt-1">
                  <!-- Empty dots -->

                  <app-dot class="small"></app-dot>
                  <app-dot class="small"></app-dot>
                  <app-dot class="small"></app-dot>
                  <app-dot class="small"></app-dot>
                  <app-dot class="small"></app-dot>
                  <app-dot class="small"></app-dot>
                </div>
                <div class="dot-filled-wrapper">
                  <!-- Filled dots -->
                  <!--add visible or invisible class to show or hide dot -->
                  <span class="dot-filled dot-filled-1 invisible"></span>
                  <span class="dot-filled dot-filled-2 invisible"></span>
                  <span class="dot-filled dot-filled-3 invisible"></span>
                  <span class="dot-filled dot-filled-4 invisible"></span>
                  <span class="dot-filled dot-filled-5 invisible"></span>
                  <span class="dot-filled dot-filled-6 invisible"></span>
                </div>
              </div>
              <div class="position-relative" style="z-index: 13;">
                <circle-progress [innerStrokeWidth]="49" [radius]="135" [showTitle]="false" [showSubtitle]="false"
                                 [showUnits]="false" [space]="-46" [outerStrokeWidth]="40"
                                 [percent]="getTotalStakedPercent$ | async">
                </circle-progress>
              </div>
              <div class="circular-inner"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-8 mt-4 mt-xl-4">
        <div class="row">
          <div class="col-md-12 mt-0 mt-md-0 mb-xl-3">
            <app-stake></app-stake>
          </div>
        </div>
      </div>
      <div class="col-xl-4 mt-4 mt-xl-4">
        <!-- For the approved sync please change class role-req to staking-terms -->
        <div [ngClass]="{ 'role-req': (isPatronSynced | async) === false }" class="staking-terms text-color p-4"
             *ngIf="isStakingVerificationEnabled">
          <app-enrolment-status-check></app-enrolment-status-check>
        </div>
        <!-- <div class="staking-widget widget-inner mt-4 p-4">
          <div class="staking-widget-xs-label text-color mb-2">
            Staking pool stats
          </div>
          <h3 class="mb-3 text-color">
            <ng-container *ngIf="getTotalStaked$ | async as totalStaked">{{ totalStaked | lastDigits }}
            </ng-container>
            <span class="staking-currency">EWT</span>
          </h3>
          <mat-progress-bar mode="determinate" [value]="getTotalStakedPercent$ | async"></mat-progress-bar>
          <div class="limit-text color-grey mt-2">
            {{ getTotalStakedPercent$ | async | lastDigits }}% of {{ hardCap$ | async }} EWT
            Staking Pool limit
          </div>
        </div> -->
        <div class="staking-terms mt-4">
          <div class="d-flex flex-row align-items-center mx-2 mx-md-4 mt-2 mb-5">
            <img src="../../../../assets/img/staking/terms-condition-image.png" width="55" height="auto"/>
            <app-label size="xl" class="text-color ml-3 ml-md-3">
              Terms of participation
            </app-label>
          </div>
          <div>
            <ul class="staking-list d-flex flex-column mt-4 mr-3 mx-2 pl-4 pr-3">
              <li>Staked EWT can be withdrawn at any time</li>
              <li>
                Hourly rewards will be compounded (added to the total stake and
                earn interest)
              </li>
              <li>
                A small gas fee will be charged for Stake and Unstake operations
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="col-md-12 mb-md-0 mb-lg-0 mt-5 mt-lg-4">
        <div class="staking-card widget-main row">
          <div class="col-xl-6 d-flex align-items-center">
            <div class="d-flex flex-column">
              <div>
                <h5 class="mb-0 small letter-spacing text-uppercase">Snapshots</h5>
                <h2>Claim your<br><span>snapshot rewards</span></h2>
              </div>
              <div class="my-3">
                <p>
                  Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam eu turpis molestie, dictum est a,
                  mattis tellus. Sed dignissim, metus nec fringilla accumsan, risus sem sollicitudin lacus, ut interdum
                  tellus elit sed risus. Maecenas eget condimentum velit, sit amet feugiat lectus.
                </p>
              </div>
            </div>
          </div>
          <div class="col-xl-6 d-flex align-items-center justify-content-center">
            <img class="snapshots-atoms-wrapper" src="../../../../assets/img/staking/snapshots-atom.png"/>
          </div>
        </div>
      </div>
      <div class="col-xl-8 mt-4 mt-xl-4">
        <app-snapshots id="snapshot"></app-snapshots>
      </div>
      <div class="col-xl-4 mt-4 mt-xl-4">
        <app-check-snapshot class="mb-5"></app-check-snapshot>

        <app-snapshot-stats></app-snapshot-stats>

      </div>
    </div>
  </div>
  <app-staking-footer></app-staking-footer>
</div>
